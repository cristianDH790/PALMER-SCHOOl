import{a as Ee}from"./chunk-3YJIL2AV.js";import{a as xe,b as we}from"./chunk-HFRCUUGC.js";import{d as oe}from"./chunk-E2VHAIMQ.js";import{e as W,f as le}from"./chunk-2S7Z6R6C.js";import{a as ke,c as X,d as Y,e as ee,f as te,g as ie,h as ae,p as ne,q as re}from"./chunk-ATJWKJSD.js";import{A as be,B as Ce,a as se,b as pe,e as de,h as me,k as he,o as ge,q as ue,t as _e,u as ve,z as fe}from"./chunk-OXEFS4WE.js";import{Aa as u,D as $,Eb as G,G as L,H as j,Ha as b,Hb as Z,J as d,Ja as h,K as m,La as p,Pa as E,Qa as F,Ra as A,Wa as V,Xa as B,Xb as J,Ya as l,Z as Q,Za as U,Zb as D,_a as S,aa as c,bb as x,bc as ce,cb as w,cc as Se,db as M,eb as K,gb as H,h as P,ha as R,ja as q,mb as C,na as k,ra as v,sa as f,ta as O,va as N,wa as I,xa as g,ya as r,za as o}from"./chunk-5G623SOG.js";import{d as z}from"./chunk-KAT7YFEL.js";var _=z(ke());var y=class{nombre;ruta;nivel;padre;subCarpeta};var ye=z(Ee());var T=class n{constructor(i){this.http=i}urlEndPoint=D.URL_BACKEND;getCarpetas(i){return this.http.get(this.urlEndPoint+"/carpetas",{params:{nombreCarpeta:i}}).pipe(P(e=>(e.carpetas.map(t=>t),e)))}getArchivos(i){return console.log("carpeta recibida",i),console.log("ruta carpeta log",i?.ruta),this.http.post(this.urlEndPoint+"/archivos",{ruta:i.ruta}).pipe(P(e=>(e.archivos.map(t=>t),e)))}directorioNuevo(i){return console.log(i),this.http.post(this.urlEndPoint+"/nuevo-directorio",i).pipe(P(e=>e))}archivoUpload(i,e){let t=new FormData;return t.append("archivo",i),t.append("ruta",e),this.http.post(this.urlEndPoint+"/archivoUpload",t)}eliminarArchivoCarpeta(i,e){let t={carpeta:i.ruta,archivo:e?.nombre};return this.http.post(this.urlEndPoint+"/eliminarArchivoCarpeta",t)}descargarArchivo(i,e){let t={carpeta:i.ruta,archivo:e?.nombre};return this.http.post(this.urlEndPoint+"/descargarArchivo",t)}renombrarArchivo(i){return this.http.post(this.urlEndPoint+"/renombrar-archivo",i)}copiarArchivo(i){return this.http.post(this.urlEndPoint+"/copiar-archivo",i)}static \u0275fac=function(e){return new(e||n)(L(Z))};static \u0275prov=$({token:n,factory:n.\u0275fac})};var Ve=["modalNueva"],Te=["modalSeleccion"],Pe=["modalUpload"],Re=["modalRenombrar"],Oe=["modalCopiar"];function Ne(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(2);g("icon",e.faFolder)}}function Ie(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(2);g("icon",e.faUpload)}}function De(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(2);g("icon",e.faPlus)}}function Be(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(2);g("icon",e.faMinus)}}function Ue(n,i){if(n&1){let e=b();r(0,"div",15)(1,"a",23),h("click",function(){let a=d(e).$implicit,s=p();return m(s.verCarpetas(a,s.carpetaStorage))}),v(2,Ne,1,1,"fa-icon",10),v(3,Ie,1,1,"fa-icon",10),r(4,"span"),l(5),o(),v(6,De,1,1,"fa-icon",10),v(7,Be,1,1,"fa-icon",10),o()()}if(n&2){let e=i.$implicit,t=p();c(),B(t.mostrarOcultar(e)),V("active",t.carpetaSeleccionada.nombre==e.nombre),c(),f(e.nombre!=t.carpetaSeleccionada.nombre&&e.nombre!=t.carpetaSeleccionada.padre?2:-1),c(),f(e.nombre==t.carpetaSeleccionada.nombre||e.nombre==t.carpetaSeleccionada.padre?3:-1),c(2),S(" ",e.nombre," "),c(),f(e.subCarpeta&&e.nombre!=t.carpetaSeleccionada.nombre&&e.nombre!=t.carpetaSeleccionada.padre?6:-1),c(),f(e.subCarpeta&&e.nombre==t.carpetaSeleccionada.nombre||e.subCarpeta&&e.nombre==t.carpetaSeleccionada.padre?7:-1)}}function We(n,i){if(n&1){let e=b();r(0,"tr")(1,"td",29),h("click",function(){let a=d(e).$implicit,s=p(2);return m(s.clickEvent(a))}),u(2,"img",30),o(),r(3,"td",23),h("click",function(){let a=d(e).$implicit,s=p(2);return m(s.clickEvent(a))}),l(4),o(),r(5,"td",31),h("click",function(){let a=d(e).$implicit,s=p(2);return m(s.clickEvent(a))}),l(6),o(),r(7,"td",32),h("click",function(){let a=d(e).$implicit,s=p(2);return m(s.clickEvent(a))}),l(8),o()()}if(n&2){let e=i.$implicit,t=p(2);V("selected",t.archivoSeleccionado==e),c(2),g("alt",K(e.nombre))("src",t.mostrarImagen(e),Q),c(2),U(e.nombre),c(2),S("",e.size," KB"),c(2),U(e.lastModif)}}function ze(n,i){if(n&1&&(r(0,"div",16)(1,"div",24)(2,"table",25)(3,"thead"),u(4,"th"),r(5,"th"),l(6,"Nombre"),o(),r(7,"th",26),l(8,"Peso"),o(),r(9,"th",27),l(10,"F. Modificaci\xF3n"),o()(),r(11,"tbody"),N(12,We,9,8,"tr",28,O),o()()()()),n&2){let e=p();c(12),I(e.archivos)}}function $e(n,i){n&1&&(r(0,"div",17)(1,"div",33)(2,"h4"),l(3,"No se encontraron archivos en el directorio actual"),o()()())}function Le(n,i){}function je(n,i){if(n&1){let e=b();k(0,Le,0,0,"ng-template",null,6,C),r(2,"div",34)(3,"h4",35),l(4,"Nuevo directorio"),o(),r(5,"button",36),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),r(6,"span",37),l(7,"\xD7"),o()()(),r(8,"div",38)(9,"div",39)(10,"label",40),l(11,"Ingrese el nombre del nuevo directorio"),o(),r(12,"input",41),M("ngModelChange",function(a){d(e);let s=p();return w(s.directorio,a)||(s.directorio=a),m(a)}),o()(),r(13,"small",40),l(14),o(),r(15,"button",42),h("click",function(){d(e);let a=p();return m(a.crearDirectorio(a.carpetaStorage))}),l(16,"Crear"),o()(),r(17,"div",43)(18,"button",44),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),l(19,"Cerrar"),o()()}if(n&2){let e=p();c(12),x("ngModel",e.directorio),c(2),S('Ruta "',e.url_imagen+"/archivos/"+e.carpetaSeleccionada.ruta,'"')}}function Qe(n,i){if(n&1){let e=b();r(0,"div",50)(1,"div",39)(2,"label",40),l(3,"Ancho "),o(),r(4,"div",47)(5,"input",51),M("ngModelChange",function(a){d(e);let s=p(2);return w(s.ancho,a)||(s.ancho=a),m(a)}),o()()()()}if(n&2){let e=p(2);c(5),x("ngModel",e.ancho)}}function qe(n,i){if(n&1){let e=b();r(0,"div",50)(1,"div",39)(2,"label",40),l(3,"Alto "),o(),r(4,"div",47)(5,"input",51),M("ngModelChange",function(a){d(e);let s=p(2);return w(s.alto,a)||(s.alto=a),m(a)}),o()()()()}if(n&2){let e=p(2);c(5),x("ngModel",e.alto)}}function Ke(n,i){if(n&1){let e=b();r(0,"div",50)(1,"div",39)(2,"button",52),h("click",function(){d(e);let a=p(2);return m(a.enviar())}),l(3,"Aceptar"),o()()()}}function He(n,i){if(n&1){let e=b();r(0,"div",34)(1,"h4",35),l(2,"Seleccionar"),o(),r(3,"button",36),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),r(4,"span",37),l(5,"\xD7"),o()()(),r(6,"div",45)(7,"div",46)(8,"label",40),l(9,"Ruta "),o(),r(10,"div",47)(11,"input",48),M("ngModelChange",function(a){d(e);let s=p();return w(s.ruta,a)||(s.ruta=a),m(a)}),o(),r(12,"span",49),h("click",function(){d(e);let a=p();return m(a.copiarTexto())}),u(13,"fa-icon",10),o()()(),v(14,Qe,6,1,"div",50),v(15,qe,6,1,"div",50),v(16,Ke,4,0,"div",50),o(),r(17,"div",43)(18,"button",44),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),l(19,"Cerrar"),o()()}if(n&2){let e=p();c(11),x("ngModel",e.ruta),c(2),g("icon",e.faCopy),c(),f(e.esImage?14:-1),c(),f(e.esImage?15:-1),c(),f(e.esImage?16:-1)}}function Ge(n,i){}function Ze(n,i){if(n&1){let e=b();k(0,Ge,0,0,"ng-template",null,6,C),r(2,"div",34)(3,"h4",35),l(4,"Subir archivo"),o(),r(5,"button",36),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),r(6,"span",37),l(7,"\xD7"),o()()(),r(8,"div",38)(9,"div",39)(10,"label",40),l(11,"Adjunte archivo"),o(),r(12,"input",53),h("change",function(a){d(e);let s=p();return m(s.seleccionarArchivo(a))}),M("ngModelChange",function(a){d(e);let s=p();return w(s.urlArchivo,a)||(s.urlArchivo=a),m(a)}),o()(),r(13,"button",42),h("click",function(){d(e);let a=p();return m(a.subirArchivo(a.carpetaStorage))}),l(14,"Subir"),o()(),r(15,"div",43)(16,"button",44),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),l(17,"Cerrar"),o()()}if(n&2){let e=p();c(12),x("ngModel",e.urlArchivo)}}function Je(n,i){}function Xe(n,i){if(n&1){let e=b();k(0,Je,0,0,"ng-template",null,6,C),r(2,"div",34)(3,"h4",35),l(4,"Renombrar archivo"),o(),r(5,"button",36),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),r(6,"span",37),l(7,"\xD7"),o()()(),r(8,"div",38)(9,"div",39)(10,"label",40),l(11,"Ingrese el nuevo nombre del archivo"),o(),r(12,"input",54),M("ngModelChange",function(a){d(e);let s=p();return w(s.nombreArchivo,a)||(s.nombreArchivo=a),m(a)}),o()(),r(13,"small",40),l(14),o(),r(15,"button",42),h("click",function(){d(e);let a=p();return m(a.renombrar())}),l(16,"Renombrar"),o()(),r(17,"div",43)(18,"button",44),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),l(19,"Cerrar"),o()()}if(n&2){let e=p();c(12),x("ngModel",e.nombreArchivo),c(2),S('Ruta archivo anterior: "',e.url_imagen+"/archivos/"+(e.carpetaSeleccionada.nombre==""?e.archivoSeleccionado.nombre:e.carpetaSeleccionada.ruta+"/"+e.archivoSeleccionado.nombre),'"')}}function Ye(n,i){}function et(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(3);g("icon",e.faFolder)}}function tt(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(3);g("icon",e.faFolderOpen)}}function it(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(3);g("icon",e.faPlus)}}function at(n,i){if(n&1&&u(0,"fa-icon",10),n&2){let e=p(3);g("icon",e.faMinus)}}function nt(n,i){if(n&1){let e=b();r(0,"div",58)(1,"a",23),h("click",function(){let a=d(e).$implicit,s=p(2);return m(s.verCarpetasCopiar(a,s.carpetaStorage))}),v(2,et,1,1,"fa-icon",10),v(3,tt,1,1,"fa-icon",10),r(4,"span"),l(5),o(),v(6,it,1,1,"fa-icon",10),v(7,at,1,1,"fa-icon",10),o()()}if(n&2){let e=i.$implicit,t=p(2);c(),B(t.mostrarOcultar(e)),V("active",t.carpetaCopiaSeleccionada.nombre==e.nombre),c(),f(e.nombre!=t.carpetaCopiaSeleccionada.nombre&&e.nombre!=t.carpetaCopiaSeleccionada.padre?2:-1),c(),f(e.nombre==t.carpetaCopiaSeleccionada.nombre||e.nombre==t.carpetaCopiaSeleccionada.padre?3:-1),c(2),S(" ",e.nombre," "),c(),f(e.subCarpeta&&e.nombre!=t.carpetaCopiaSeleccionada.nombre&&e.nombre!=t.carpetaCopiaSeleccionada.padre?6:-1),c(),f(e.subCarpeta&&e.nombre==t.carpetaCopiaSeleccionada.nombre||e.subCarpeta&&e.nombre==t.carpetaCopiaSeleccionada.padre?7:-1)}}function rt(n,i){if(n&1){let e=b();k(0,Ye,0,0,"ng-template",null,6,C),r(2,"div",34)(3,"h4",35),l(4,"Copiar archivo"),o(),r(5,"button",36),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),r(6,"span",37),l(7,"\xD7"),o()()(),r(8,"div",55)(9,"div",39)(10,"label",40),l(11,"Ingrese el nuevo nombre del archivo"),o(),r(12,"input",54),M("ngModelChange",function(a){d(e);let s=p();return w(s.nombreArchivo,a)||(s.nombreArchivo=a),m(a)}),o()(),r(13,"small",40),l(14),o(),r(15,"div",39)(16,"label",56),l(17,"Navegue y seleccione la carpeta destino de la copia"),o(),r(18,"a",57),h("click",function(){d(e);let a=p();return m(a.raizCopia(a.carpetaStorage))}),u(19,"fa-icon",10),l(20),o(),N(21,nt,8,9,"div",58,O),o(),r(23,"button",42),h("click",function(){d(e);let a=p();return m(a.copiar(a.carpetaStorage))}),l(24,"Copiar"),o()(),r(25,"div",43)(26,"button",44),h("click",function(){let a=d(e).$implicit;return m(a.dismiss("Cross click"))}),l(27,"Cerrar"),o()()}if(n&2){let e=p();c(12),x("ngModel",e.nombreArchivo),c(2),S('Ruta archivo anterior: "',e.url_imagen+"/archivos/"+(e.carpetaSeleccionada.nombre==""?e.archivoSeleccionado.nombre:e.carpetaSeleccionada.ruta+"/"+e.archivoSeleccionado.nombre),'"'),c(4),V("active",e.carpetaCopiaSeleccionada.nombre==e.carpetaStorage),c(),g("icon",e.faFolderOpen),c(),S("",e.carpetaStorage," "),c(),I(e.carpetasCopiar)}}var Me=class n{constructor(i,e,t){this.modalService=i;this.fileManagerService=e;this.ngbService=t;this.carpetaStorage=localStorage.getItem("PALMER.admin.carpeta"),console.log("inicializa carpeta"),this.carpetas=new Array,this.archivos=new Array,this.directorio="",console.log("inicializa carpeta copia"),this.carpetasCopiar=new Array,console.log("inicializa carpeta con parametros"),this.carpetaSeleccionada=new y,this.carpetaSeleccionada.padre=this.carpetaStorage,this.carpetaSeleccionada.nivel=1,this.carpetaSeleccionada.nombre=this.carpetaStorage,this.carpetaSeleccionada.ruta=this.carpetaStorage,this.carpetaSeleccionada.subCarpeta=!1,console.log("inicializa carpeta copia con parametros"),this.carpetaCopiaSeleccionada=new y,this.carpetaCopiaSeleccionada.padre=this.carpetaStorage,this.carpetaCopiaSeleccionada.nivel=1,this.carpetaCopiaSeleccionada.nombre=this.carpetaStorage,this.carpetaCopiaSeleccionada.ruta=this.carpetaStorage,this.carpetaCopiaSeleccionada.subCarpeta=!1,this.fileManagerService.getCarpetas(this.carpetaCopiaSeleccionada.nombre).subscribe(a=>{console.log("buscar carpeta (getCarpeta)"),this.carpetas=a.carpetas,this.carpetasCopiar=a.carpetas,this.lcarpetas=!0,this.actualizarCargador()}),console.log("buscar archivos"),this.fileManagerService.getArchivos(this.carpetaSeleccionada).subscribe(a=>{console.log("carpeta seleccionada",this.carpetaSeleccionada),a&&a.archivos&&(this.archivos=a.archivos),this.larchivos=!0,this.actualizarCargador()})}faUpload=ve;faFolder=me;faDownload=_e;faEdit=de;faCopy=fe;faTrash=ge;faCheck=Ce;faFolderOpen=he;faPlus=be;faMinus=ue;url_imagen=D.URL_IMAGE;modal;lcarpetas=!1;larchivos=!1;modalNueva;modalSeleccion;modalupload;modalRenombrar;modalCopiar;ventanaNueva;ventanaSeleccion;ventanaUpload;ventanaRenombrar;ventanaCopiar;extImage=["jpg","jpeg","png","gif","svg","tiff","bmp","ai","cmp","avif","heif","webp","jpg"];extPowerPoint=["pptx","ppt","ppsx","odp","pps"];extPdf=["pdf"];extExcel=["xlsx","xls","csv","xlsm","xlsb","pps","xltx","xltm","xlt"];extWord=["doc","docm","docx","dot","dotm","dotx","xltm","html"];extAudio=["mp3","wav","ogg","webm","aac"];extVideo=["mp4","webm","mov","wmv","avi","flv","mkv"];extZip=["zip","gzip","bzip2","tar","rar","7z"];esImage=!1;ancho="auto";alto="auto";urlArchivo="";archivoUploadSeleccionado;desabilitaEliminar=!1;nombreArchivo="";carpetasCopiar;carpetaCopiaSeleccionada;carpetaStorage;closeResult;carpetas;carpetaSeleccionada;archivoSeleccionado;archivos;directorio;ruta="";loadingService=j(Se);raiz(i){this.loadingService.show(),this.archivos=new Array,this.carpetaSeleccionada=new y,this.carpetaSeleccionada.padre="",this.carpetaSeleccionada.nivel=1,this.carpetaSeleccionada.nombre=i,this.carpetaSeleccionada.ruta=i,this.carpetaSeleccionada.subCarpeta=!1,this.fileManagerService.getCarpetas(this.carpetaSeleccionada.ruta).subscribe(e=>{this.carpetas=e.carpetas,this.lcarpetas=!0,this.actualizarCargador()}),this.fileManagerService.getArchivos(this.carpetaSeleccionada).subscribe(e=>{e&&e.archivos&&(this.archivos=e.archivos,console.log(this.archivos)),this.larchivos=!0,this.actualizarCargador()})}raizCopia(i){this.archivos=new Array,this.carpetaCopiaSeleccionada=new y,this.carpetaCopiaSeleccionada.padre="",this.carpetaCopiaSeleccionada.nivel=1,this.carpetaCopiaSeleccionada.nombre=i,this.carpetaCopiaSeleccionada.ruta=i,this.carpetaCopiaSeleccionada.subCarpeta=!1}verCarpetas(i,e){this.archivos=new Array,this.desabilitaEliminar=!0,this.archivoSeleccionado=null,this.carpetaSeleccionada=i,this.fileManagerService.getCarpetas(this.carpetaStorage).subscribe(t=>{this.carpetas=t.carpetas,this.lcarpetas=!0,this.actualizarCargador()}),this.fileManagerService.getArchivos(i).subscribe(t=>{t&&t.archivos&&(this.archivos=t.archivos,console.log(this.archivos),this.larchivos=!0,this.actualizarCargador())})}verCarpetasCopiar(i,e){this.loadingService.show(),this.carpetaCopiaSeleccionada=i,this.fileManagerService.getCarpetas(e).subscribe(t=>{this.carpetasCopiar=t.carpetas}),this.loadingService.hide()}mostrarImagen(i){let e;switch(this.compararExtension(i.extension)){case"imagen":e=this.url_imagen+"/archivos/"+this.carpetaSeleccionada.ruta+"/"+i.nombre;break;case"powerPoint":e=this.url_imagen+"/public/template/images/file/file-powerpoint-solid.svg";break;case"pdf":e=this.url_imagen+"/public/template/images/file/file-pdf-solid.svg";break;case"excel":e=this.url_imagen+"/public/template/images/file/file-excel-solid.svg";break;case"word":e=this.url_imagen+"/public/template/images/file/file-word-solid.svg";break;case"audio":e=this.url_imagen+"/public/template/images/file/file-audio-solid.svg";break;case"video":e=this.url_imagen+"/public/template/images/file/file-video-solid.svg";break;case"compress":e=this.url_imagen+"/public/template/images/file/file-archive-solid.svg";break;case"archivo":e=this.url_imagen+"/public/template/images/file/file-alt-solid.svg";break;default:e=this.url_imagen+"/public/template/images/file/file-alt-solid.svg";break}return e}mostrarOcultar(i){return i.nivel==2||i.nombre==this.carpetaSeleccionada.nombre,"mostrar nivel"+i.nivel}nuevoDirectorio(){this.ventanaNueva=this.ngbService.open(this.modalNueva,{ariaLabelledBy:"modal-basic-title",windowClass:"ventanaNueva"}),this.ventanaNueva.result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}uploadArchivo(){this.loadingService.hide(),this.ventanaUpload=this.ngbService.open(this.modalupload,{ariaLabelledBy:"modal-basic-title",windowClass:"ventanaUpload"}),this.ventanaUpload.result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}renombrarArchivo(){this.loadingService.hide(),this.ventanaRenombrar=this.ngbService.open(this.modalRenombrar,{ariaLabelledBy:"modal-basic-title",windowClass:"ventanaRenombrar"}),this.ventanaRenombrar.result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}copiarArchivo(i){this.loadingService.hide(),this.carpetaCopiaSeleccionada=this.carpetaSeleccionada,console.log("nombreCarpeta"),console.log(i),this.fileManagerService.getCarpetas(i).subscribe(e=>{this.carpetasCopiar=e.carpetas,console.log("this.carpetasCopiar"),console.log(this.carpetasCopiar)}),this.ventanaCopiar=this.ngbService.open(this.modalCopiar,{ariaLabelledBy:"modal-basic-title",windowClass:"ventanaCopiar"}),this.ventanaCopiar.result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}seleccionar(){this.ruta=this.url_imagen+"/archivos/"+this.carpetaSeleccionada.ruta+"/"+this.archivoSeleccionado.nombre,this.ventanaSeleccion=this.ngbService.open(this.modalSeleccion,{ariaLabelledBy:"modal-basic-title",windowClass:"ventanaSeleccion"}),this.ventanaSeleccion.result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}crearDirectorio(i){if(this.loadingService.show(),this.directorio=="")_.default.fire("Crear directorio!","Debe ingresar un nombre para el directorio","error"),this.loadingService.hide();else{let e={directorio:this.directorio,ruta:this.carpetaSeleccionada.ruta};this.fileManagerService.directorioNuevo(e).subscribe(t=>{console.log("response"),console.log(t),this.fileManagerService.getCarpetas(i).subscribe(a=>{this.carpetas=a.carpetas,console.log("this.carpetas"),console.log(i),console.log(this.carpetas),this.loadingService.hide()}),this.loadingService.hide(),this.ventanaNueva.close()})}}clickEvent(i){this.archivoSeleccionado=i,this.nombreArchivo=i.nombre,this.desabilitaEliminar=!0,this.extImage.indexOf(i.extension)>=0?this.esImage=!0:this.esImage=!1}copiarTexto(){var i=document.createElement("input");i.setAttribute("value",this.ruta),document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}getDismissReason(i){return i===W.ESC?"by pressing ESC":i===W.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}ngOnInit(){}enviar(){this.loadingService.show(),this.modal=new we,this.modal.origen="filemanager",this.modal.retorno={ancho:this.ancho,alto:this.alto,url:(this.carpetaSeleccionada.ruta==""?this.carpetaSeleccionada.ruta:this.carpetaSeleccionada.ruta+"/")+this.archivoSeleccionado.nombre,imagen:this.extImage.indexOf(this.archivoSeleccionado.extension)>=0},console.log("emitiendo modal"),this.ventanaSeleccion.close(),this.modalService.notificarEvento.emit(this.modal),this.loadingService.hide()}seleccionarArchivo(i){this.loadingService.show(),this.archivoUploadSeleccionado=i.target.files[0];let t=this.archivoUploadSeleccionado.name.split(".").pop();console.log(t),t?(this.compararExtension(t)=="compress"||this.compararExtension(t)=="archivo")&&(_.default.fire("Subir archivo!","El archivo no tiene un formato valido","error"),this.archivoUploadSeleccionado=null,this.urlArchivo=""):(this.compararExtension(t)=="compress"||this.compararExtension(t)=="archivo")&&(_.default.fire("Subir archivo!","El archivo no tiene un formato valido","error"),this.archivoUploadSeleccionado=null),this.loadingService.hide()}subirArchivo(i){this.loadingService.show(),this.urlArchivo==""?(_.default.fire("Subir archivo!","No ha seleccionado ningun archivo","error"),this.loadingService.hide()):this.fileManagerService.archivoUpload(this.archivoUploadSeleccionado,this.carpetaSeleccionada.ruta).subscribe(e=>{this.fileManagerService.getCarpetas(i).subscribe(t=>{this.carpetas=t.carpetas,console.log(this.carpetas)}),this.fileManagerService.getArchivos(this.carpetaSeleccionada).subscribe(t=>{console.log("response"),console.log(t),t&&t.archivos&&(this.archivos=t.archivos,console.log(this.archivos),_.default.fire("Subir archivo!","Archivo subido con exito","success")),this.loadingService.hide()}),this.ventanaUpload.close()})}compararExtension(i){return this.extImage.indexOf(i)>=0?"imagen":this.extPowerPoint.indexOf(i)>=0?"powerPoint":this.extPdf.indexOf(i)>=0?"pdf":this.extExcel.indexOf(i)>=0?"excel":this.extWord.indexOf(i)>=0?"word":this.extAudio.indexOf(i)>=0?"audio":this.extVideo.indexOf(i)>=0?"video":this.extZip.indexOf(i)>=0?"compress":"archivo"}validaDisabled(){return this.carpetaSeleccionada||this.archivoSeleccionado?"disabled":""}eliminar(i){if(this.carpetaSeleccionada)if(this.archivoSeleccionado){let e=_.default.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});_.default.fire({title:"Eliminar!",text:`Se eliminara el archivo ${this.archivoSeleccionado.nombre}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",reverseButtons:!0}).then(t=>{t.value&&this.fileManagerService.eliminarArchivoCarpeta(this.carpetaSeleccionada,this.archivoSeleccionado).subscribe(()=>{this.archivos=this.archivos.filter(a=>a!==this.archivoSeleccionado),_.default.fire("Eliminar!",`El archivo "${this.archivoSeleccionado.nombre}" se elimin\xF3 con \xE9xito.`,"success"),this.loadingService.hide()})})}else _.default.fire("Eliminar!",`Se eliminara la carpeta ${this.carpetaSeleccionada.ruta} `,"warning"),_.default.fire({title:"Eliminar!",text:`Se eliminara la carpeta ${this.carpetaSeleccionada.ruta}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",reverseButtons:!0}).then(e=>{e.value&&this.fileManagerService.eliminarArchivoCarpeta(this.carpetaSeleccionada,null).subscribe(()=>{this.carpetas=this.carpetas.filter(t=>t!==this.carpetaSeleccionada),_.default.fire("Eliminar!",`La carpeta "${this.carpetaSeleccionada.ruta}" se elimin\xF3 con \xE9xito.`,"success"),this.fileManagerService.getCarpetas(i).subscribe(t=>{this.carpetas=t.carpetas,console.log(this.carpetas),this.loadingService.hide()})})});else this.loadingService.hide()}descargar(){this.loadingService.show(),this.fileManagerService.descargarArchivo(this.carpetaSeleccionada,this.archivoSeleccionado).subscribe(i=>{(0,ye.saveAs)(i,this.archivoSeleccionado.nombre),_.default.fire("Descargar archivo","Archivo descargado con \xE9xito.","success"),this.loadingService.hide()},i=>{_.default.fire("Descargar archivo","El archivo no se pudo descargar.","warning"),this.loadingService.hide(),console.error(i)})}renombrar(){if(this.loadingService.show(),this.nombreArchivo=="")_.default.fire("Renombrar archivo!","Ingrese el nombre nuevo del archivo","error");else{let i={nombreNuevo:this.nombreArchivo,nombreAnterior:this.archivoSeleccionado.nombre,ruta:this.carpetaSeleccionada.ruta};this.fileManagerService.renombrarArchivo(i).subscribe(e=>{console.log("response"),console.log(e),this.fileManagerService.getArchivos(this.carpetaSeleccionada).subscribe(t=>{console.log("response"),console.log(t),t&&t.archivos&&(this.archivos=t.archivos,console.log(this.archivos),_.default.fire("Renombrar archivo!","Nombre de archivo modificado con exito","success")),this.loadingService.hide()}),this.ventanaRenombrar.close()})}}copiar(i){if(this.loadingService.show(),this.nombreArchivo=="")_.default.fire("Copiar archivo!","Ingrese el nombre nuevo del archivo","error");else{let e={nombreNuevo:this.nombreArchivo,carpetaNueva:this.carpetaCopiaSeleccionada.ruta,nombreAnterior:this.archivoSeleccionado.nombre,carpetaAnterior:this.carpetaSeleccionada.ruta};console.log("data"),console.log(e),this.fileManagerService.copiarArchivo(e).subscribe(t=>{this.carpetaSeleccionada=this.carpetaCopiaSeleccionada,this.fileManagerService.getCarpetas(i).subscribe(a=>{this.carpetas=a.carpetas,console.log(this.carpetas)}),this.fileManagerService.getArchivos(this.carpetaCopiaSeleccionada).subscribe(a=>{console.log("response"),console.log(a),a&&a.archivos&&(this.archivos=a.archivos,console.log(this.archivos),_.default.fire("Copiar archivo!","Archivo copiado con exito","success"),this.loadingService.hide()),this.loadingService.hide()}),this.ventanaCopiar.close()})}}cancelar(){}actualizarCargador(){this.lcarpetas&&this.larchivos?this.loadingService.hide():this.loadingService.show()}static \u0275fac=function(e){return new(e||n)(R(xe),R(T),R(le))};static \u0275cmp=q({type:n,selectors:[["file-manager"]],viewQuery:function(e,t){if(e&1&&(E(Ve,5),E(Te,5),E(Pe,5),E(Re,5),E(Oe,5)),e&2){let a;F(a=A())&&(t.modalNueva=a.first),F(a=A())&&(t.modalSeleccion=a.first),F(a=A())&&(t.modalupload=a.first),F(a=A())&&(t.modalRenombrar=a.first),F(a=A())&&(t.modalCopiar=a.first)}},features:[H([T])],decls:51,vars:18,consts:[["filtroForm","ngForm"],["modalNueva",""],["modalSeleccion",""],["modalUpload",""],["modalRenombrar",""],["modalCopiar",""],["customLoadingTemplate",""],[1,"d-flex","justify-content-start","mb-3","p-l-10","p-r-10","p-t-5"],[1,"form-group",2,"margin-right","10px"],["type","button",1,"form-control","btn","btn-secondary","btn-popup",3,"click"],[3,"icon"],["type","button",1,"form-control","btn","btn-secondary","btn-popup",3,"click","disabled"],[1,"row"],[1,"col-md-2","carpetas"],[1,"mostrar","cajita-principal",2,"cursor","pointer",3,"click"],[1,"carpeta"],[1,"col-md-10"],[1,"col-md-10","archivos","row"],["id","nueva"],["id","seleccion"],["id","upload"],["id","renombrar"],["id","coiar"],[2,"cursor","pointer",3,"click"],[1,"archivos"],[1,"table","table-responsive"],[1,"text-center"],[1,"text-right",2,"width","135px"],[3,"selected"],[1,"text-left",2,"width","100px","cursor","pointer",3,"click"],["width","70",3,"src","alt"],[1,"text-center",2,"cursor","pointer",3,"click"],[1,"text-right",2,"cursor","pointer",3,"click"],[1,"col-md-12"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"overflow-y","scroll","max-height","30%","margin-top","0px","margin-bottom","0px","height","200px","overflow-y","auto"],[1,"form-group"],["for",""],["type","text","name","directorio","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","form-control",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-inverse",3,"click"],[1,"modal-body","row",2,"margin-top","0px","margin-bottom","0px"],[1,"form-group","col-md-12"],[1,"input-group"],["type","text","placeholder","Ruta",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text",2,"cursor","pointer",3,"click"],[1,"col-md-6"],["type","text","placeholder","pixeles",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],["type","file",1,"form-control",3,"change","ngModelChange","ngModel"],["type","text","name","nombreArchivo","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-body",2,"overflow-y","scroll","max-height","30%","margin-top","0px","margin-bottom","0px","overflow-y","auto"],["for","",1,"my-3"],[1,"mostrar",2,"cursor","pointer",3,"click"],[1,"carpeta2"]],template:function(e,t){if(e&1){let a=b();r(0,"form",null,0)(2,"div",7)(3,"div",8)(4,"button",9),h("click",function(){return d(a),m(t.uploadArchivo())}),u(5,"fa-icon",10),l(6," Subir"),o()(),r(7,"div",8)(8,"button",9),h("click",function(){return d(a),m(t.nuevoDirectorio())}),u(9,"fa-icon",10),l(10," Nueva carpeta"),o()(),r(11,"div",8)(12,"button",11),h("click",function(){return d(a),m(t.descargar())}),u(13,"fa-icon",10),l(14," Descargar"),o()(),r(15,"div",8)(16,"button",11),h("click",function(){return d(a),m(t.renombrarArchivo())}),u(17,"fa-icon",10),l(18," Renombrar"),o()(),r(19,"div",8)(20,"button",11),h("click",function(){return d(a),m(t.copiarArchivo(t.carpetaStorage))}),u(21,"fa-icon",10),l(22," Copiar"),o()(),r(23,"div",8)(24,"button",11),h("click",function(){return d(a),m(t.eliminar(t.carpetaStorage))}),u(25,"fa-icon",10),l(26," Eliminar"),o()(),r(27,"div",8)(28,"button",11),h("click",function(){return d(a),m(t.seleccionar())}),u(29,"fa-icon",10),l(30," Seleccionar"),o()()()(),r(31,"div",12)(32,"div",13)(33,"a",14),h("click",function(){return d(a),m(t.raiz(t.carpetaStorage))}),u(34,"fa-icon",10),r(35,"span"),l(36),o()(),N(37,Ue,8,9,"div",15,O),o(),v(39,ze,14,0,"div",16),v(40,$e,4,0,"div",17),o(),k(41,je,20,2,"ng-template",18,1,C)(43,He,20,5,"ng-template",19,2,C)(45,Ze,18,1,"ng-template",20,3,C)(47,Xe,20,2,"ng-template",21,4,C)(49,rt,28,6,"ng-template",22,5,C)}e&2&&(c(5),g("icon",t.faUpload),c(4),g("icon",t.faFolder),c(3),g("disabled",!t.archivoSeleccionado),c(),g("icon",t.faDownload),c(3),g("disabled",!t.archivoSeleccionado),c(),g("icon",t.faEdit),c(3),g("disabled",!t.archivoSeleccionado),c(),g("icon",t.faCopy),c(3),g("disabled",!t.desabilitaEliminar),c(),g("icon",t.faTrash),c(3),g("disabled",!t.archivoSeleccionado),c(),g("icon",t.faCheck),c(4),V("active",t.carpetaSeleccionada.nombre=="{{carpetaStorage}}"),c(),g("icon",t.faFolderOpen),c(2),S(" ",t.carpetaStorage),c(),I(t.carpetas),c(2),f(t.archivos&&t.archivos.length>0?39:-1),c(),f(t.archivos.length==0?40:-1))},dependencies:[pe,se,re,ae,X,Y,ee,J,G,ne,ie,te,oe,ce],styles:[".ventanaFileManager .modal-dialog{max-width:80%;width:80%}  .ventanaFileManager .modal-body{height:600px}  .ventanaFileManager .modal-body .carpetas{max-height:500px;min-height:500px;background:#f1f1f1;padding:15px}  .ventanaFileManager .modal-body .archivos{max-height:500px;min-height:500px;overflow-y:scroll;background:#f1f1f1;padding:15px}  .ventanaFileManager .modal-body .archivos h6{color:#000;font-weight:400}.mostrar[_ngcontent-%COMP%]{display:block}.ocultar[_ngcontent-%COMP%]{display:none}.nivel1[_ngcontent-%COMP%]{margin-left:0}.nivel2[_ngcontent-%COMP%]{margin-left:20px}.nivel3[_ngcontent-%COMP%]{margin-left:40px}.nivel4[_ngcontent-%COMP%]{margin-left:60px}.nivel5[_ngcontent-%COMP%]{margin-left:80px}  .ventanaNueva .modal-dialog{max-width:30%;width:30%;top:25%}.selected[_ngcontent-%COMP%]{background:#dbe2ee}  .ventanaSeleccion .modal-dialog{max-width:40%;width:40%}  .ventanaUpload .modal-dialog{max-width:30%;width:30%;top:25%}  .ventanaRenombrar .modal-dialog{max-width:30%;width:30%;top:25%}  .ventanaCopiar .modal-dialog{max-width:30%;width:30%;top:15%}  .ventanaFileventanaCopiarManager .modal-body{height:500px}.carpeta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4c4f52!important;display:block;padding:10px;background:#e9e9e9;border-bottom:1px solid #d9d9d9}.carpeta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff!important;background:#4c4f52}.carpeta[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{font-weight:600;color:#fff!important;background:#4c4f52}.active[_ngcontent-%COMP%]{font-weight:600;color:#4c4f52!important}.btn-primary[_ngcontent-%COMP%]{margin-right:7px;text-align:center;padding:5px 20px;width:150px}small[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]{font-size:.875em;display:block;margin-bottom:15px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;background:#d9d9d9;padding:8px 15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #ccc}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#dbe2ee;border-bottom:1px solid #ccc}"]})};export{Me as a};
