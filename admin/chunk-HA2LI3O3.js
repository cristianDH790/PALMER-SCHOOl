import{a as S}from"./chunk-6B3WCMET.js";import{a as H,c as N,d as R,e as A,f as B,g as U,h as j,p as z}from"./chunk-ATJWKJSD.js";import{$b as x,Aa as d,Ba as u,Ca as g,Eb as L,Ja as f,Kb as F,Tb as T,Ya as i,Yb as I,aa as p,bb as v,bc as W,cb as b,cc as _,db as C,gb as y,ha as l,ib as P,ja as h,jb as E,xa as O,ya as o,za as n,zb as k}from"./chunk-5G623SOG.js";import{d as D}from"./chunk-KAT7YFEL.js";var M=class s{constructor(e){this.loadingService=e}ngOnInit(){setTimeout(()=>{this.loadingService.hide()})}static \u0275fac=function(r){return new(r||s)(l(_))};static \u0275cmp=h({type:s,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"error-box"],[1,"error-body","text-center"],[1,"error-title","text-danger"],[1,"text-uppercase","error-subtitle"],[1,"text-muted","mt-4","mb-4"],["href","dashboard/inicio",1,"btn","btn-danger","btn-rounded","waves-effect","waves-light","mb-4"]],template:function(r,t){r&1&&(u(0,"div",0)(1,"div",1)(2,"h1",2),i(3,"404"),g(),u(4,"h3",3),i(5,"PAGE NOT FOUND !"),g(),u(6,"p",4),i(7,"YOU SEEM TO BE TRYING TO FIND HIS WAY HOME"),g(),u(8,"a",5),i(9,"Back to home"),g()()())},encapsulation:2})};var c=D(H());var q=s=>({"d-none":s}),J=(s,e)=>({"d-block":s,"d-none":e}),w=class s{constructor(e,r,t,m){this.router=e;this.usuarioService=r;this.authService=t;this.loadingService=m;this.usuario=new I,this.login="",this.loadingService.hide()}usuario;login;loginform=!0;recoverform=!1;ngOnInit(){}iniciarSesion(){if(this.usuario.login==null||this.usuario.password==null){c.default.fire({title:"Error de inicio de sesi\xF3n",text:"Usuario o contrase\xF1a vacias!",icon:"error",confirmButtonText:"Aceptar"});return}this.loadingService.show(),this.authService.login(this.usuario).subscribe(e=>{if(e.status!="error"){this.authService.guardarUsuario(e.token),this.authService.guardarToken(e.token);let r=this.authService.usuario;this.loadingService.hide(),c.default.fire({title:"Inicio de sesi\xF3n",text:`Hola ${r.nombres} ${r.pApellido}, has iniciado sesi\xF3n con \xE9xito!`,icon:"success",confirmButtonText:"Aceptar"}).then(()=>{this.loadingService.show(),this.router.navigate(["/dashboard/inicio"])})}else this.loadingService.hide(),c.default.fire("Error",e.mensaje,"error")},e=>{if(this.loadingService.hide(),e.status==400&&(console.log(e),c.default.fire({title:"Error de inicio de sesi\xF3n",text:"Usuario o contrase\xF1a incorrecta!",icon:"error",confirmButtonText:"Aceptar"})),e.status==401){c.default.fire({title:"Error de inicio de sesi\xF3n",text:"Se ha presentado un problema de inicio de sesi\xF3n. Cierre el navegador e int\xE9ntelo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),this.login="";return}})}recuperarClaveForm(){if(this.usuario.correo==null||this.usuario.correo==""){c.default.fire("Recuperar contrase\xF1a","Ingrese su correo de usuario!.","error");return}else this.loadingService.show(),this.usuarioService.usuarioRecuperarClave(this.usuario.correo).subscribe(e=>{c.default.fire({title:"Recuperar contrase\xF1a",text:"La recuperaci\xF3n de su contrase\xF1a se realiz\xF3 con \xE9xito. En breve recibir\xE1 un correo con una contrase\xF1a nueva!.",icon:"success",confirmButtonText:"Aceptar"}),this.loadingService.hide()},e=>{if(this.loadingService.hide(),console.log(e),e.status==404){c.default.fire({title:"Recuperar contrase\xF1a",text:`El usuario "${this.usuario.correo}" no existe en el sistema.`,icon:"error",confirmButtonText:"Aceptar"}),this.login="";return}if(e.status==406){c.default.fire({title:"Recuperar contrase\xF1a",text:`El usuario "${this.usuario.correo}" cuenta con un correo inv\xE1lido.`,icon:"error",confirmButtonText:"Aceptar"}),this.login="";return}this.loadingService.hide()}),this.recoverform=!this.recoverform}showRecoverForm(){this.loadingService.hide(),this.loginform=!this.loginform,this.recoverform=!this.recoverform}static \u0275fac=function(r){return new(r||s)(l(T),l(S),l(x),l(_))};static \u0275cmp=h({type:s,selectors:[["app-login"]],features:[y([S,x])],decls:51,vars:10,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"background","url('fondo.jpg') center / cover no-repeat"],[1,"auth-box","m-3","m-md-0"],["id","loginform",3,"ngClass"],[1,"text-center"],["_ngcontent-fxr-c1","",1,"logo"],["_ngcontent-fxr-c1","",1,"db"],["_ngcontent-fxr-c1","","alt","logo","src","logo.png","width","30%"],["_ngcontent-fxr-c1","",1,"font-medium","m-b-20",2,"padding-top","15px"],[1,"row"],[1,"col-12"],["id","loginform",1,"form-horizontal","mt-3",3,"ngSubmit"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"ti-user"],["type","text","type","text","name","login","id","login","aria-label","Username","placeholder","Usuario","aria-describedby","basic-addon1",1,"form-control",3,"ngModelChange","ngModel"],["id","basic-addon2",1,"input-group-text"],[1,"ti-pencil"],["placeholder","Clave","type","password","name","clave","id","clave","aria-label","Password","aria-describedby","basic-addon1",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-check","d-flex"],["href","javascript:void(0)","id","to-recover",1,"text-dark","fs-3","ms-auto",3,"click"],[1,"fa","fa-lock","me-2"],[1,"form-group","text-center","mt-3"],[1,"col-xs-12"],["type","submit",1,"btn","d-block","w-100","btn-lg","btn-info"],["id","recoverform",3,"ngClass"],[1,"logo"],[1,"row","mt-3"],["type","text","name","login","placeholder","correo",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],["type","button","name","action",1,"btn","d-block","w-100","btn-lg","btn-danger",3,"click"],["href","javascript:void(0)",1,"btn","d-block","w-100","btn-lg","btn-info",3,"click"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),d(6,"img",6),n(),o(7,"h5",7),i(8,"Inicio de sesi\xF3n"),n()()(),o(9,"div",8)(10,"div",9)(11,"form",10),f("ngSubmit",function(){return t.iniciarSesion()}),o(12,"div",11)(13,"span",12),d(14,"i",13),n(),o(15,"input",14),C("ngModelChange",function(a){return b(t.usuario.login,a)||(t.usuario.login=a),a}),n()(),o(16,"div",11)(17,"span",15),d(18,"i",16),n(),o(19,"input",17),C("ngModelChange",function(a){return b(t.usuario.password,a)||(t.usuario.password=a),a}),n()(),o(20,"div",18)(21,"div",19)(22,"div",20)(23,"a",21),f("click",function(){return t.showRecoverForm()}),d(24,"i",22),i(25," \xBFOlvid\xF3 la contrase\xF1a?"),n()()()(),o(26,"div",23)(27,"div",24)(28,"button",25),i(29,"Ingresar"),n()()()()()()(),o(30,"div",26)(31,"div",3)(32,"div",4)(33,"span",5),d(34,"img",6),n(),o(35,"h5",7),i(36,"Recuperar contrase\xF1a"),n()()(),o(37,"div",27)(38,"span"),i(39,"Ingresa tu correo electronico y enviaremos una nueva contrase\xF1a a tu correo!"),n()(),o(40,"div",28)(41,"form",9)(42,"div",18)(43,"div",9)(44,"input",29),C("ngModelChange",function(a){return b(t.usuario.correo,a)||(t.usuario.correo=a),a}),n()()(),o(45,"div",28)(46,"div",9)(47,"button",30),f("click",function(){return t.recuperarClaveForm()}),i(48,"Enviar"),n(),o(49,"a",31),f("click",function(){return t.showRecoverForm()}),i(50,"Regresar"),n()()()()()()()()),r&2&&(p(2),O("ngClass",P(5,q,t.recoverform)),p(13),v("ngModel",t.usuario.login),p(4),v("ngModel",t.usuario.password),p(11),O("ngClass",E(7,J,t.recoverform,!t.recoverform)),p(14),v("ngModel",t.usuario.correo))},dependencies:[k,z,j,N,R,A,U,B,L,W,F],styles:['.auth-wrapper[_ngcontent-%COMP%]{min-height:100vh!important;position:relative!important}.auth-wrapper[_ngcontent-%COMP%]   .auth-box[_ngcontent-%COMP%]{background:#fff!important;padding:20px!important;box-shadow:1px 0 20px #00000014!important;max-width:400px!important;width:90%!important;margin:10% 0!important}.auth-wrapper[_ngcontent-%COMP%]   #loginform[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:block;color:#094886;font-size:25px;font-weight:700;margin-bottom:0;text-transform:uppercase}.ti-user[_ngcontent-%COMP%]:before{content:"\\f007";font-family:FontAwesome;font-style:normal}.ti-pencil[_ngcontent-%COMP%]:before{content:"\\f044";font-family:FontAwesome;font-style:normal}.auth-wrapper[_ngcontent-%COMP%]   #loginform[_ngcontent-%COMP%]   .text-dark[_ngcontent-%COMP%]{display:block;text-align:center;color:#094886!important;font-weight:700!important;font-size:16px!important;text-decoration:none}.btn-info[_ngcontent-%COMP%]{color:#fff!important;background:#094886!important;border:1px solid #094886!important;margin-bottom:20px;padding:7px;font-size:16px;text-transform:uppercase;font-weight:500}.btn-info[_ngcontent-%COMP%]:hover{color:#fff!important;background:#42ad22!important;border:1px solid #42ad22!important}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:block;color:#094886;font-size:25px;font-weight:700;margin-bottom:0;text-transform:uppercase}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;display:block;text-align:center}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   .form-control-lg[_ngcontent-%COMP%]{font-size:16px}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{color:#fff;background-color:#094886;border:1px solid #094886!important;display:inline-block!important;width:47%!important;margin-bottom:8px;padding:8px 0;text-transform:uppercase;font-size:16px;font-weight:500}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background:#42ad22!important;color:#fff!important;border:1px solid #42ad22!important}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{color:#fff!important;background-color:silver!important;border-color:silver!important;margin-bottom:7px;padding:8px;font-size:16px;text-transform:uppercase;font-weight:500;display:inline-block!important;width:48%!important;margin-left:10px}.auth-wrapper[_ngcontent-%COMP%]   #recoverform[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:hover{background:#42ad22!important;color:#fff!important;border:1px solid #42ad22!important}']})};var le=[{path:"",children:[{path:"404",component:M},{path:"login",component:w}]}];export{le as default};
